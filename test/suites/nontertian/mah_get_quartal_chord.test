// Test invalid size - too small
ASSERT_E(mah_get_quartal_chord(NOTE(C, 0, MAH_OCTAVE_4), 1, NOTE_N(5, 0), NOTE_N(5, 0), &ERR), ERROR_INVALID_NONTERTIAN_SIZE);

// Test invalid size - too large  
ASSERT_E(mah_get_quartal_chord(NOTE(C, 0, MAH_OCTAVE_4), 6, NOTE_N(6, 0), NOTE_N(6, 0), &ERR), ERROR_INVALID_NONTERTIAN_SIZE);

// Test null pointers
ASSERT_E(mah_get_quartal_chord(NOTE(C, 0, MAH_OCTAVE_4), 3, NULL, NOTE_N(3, 0), &ERR), ERROR_INVALID_RANGE);
ASSERT_E(mah_get_quartal_chord(NOTE(C, 0, MAH_OCTAVE_4), 3, NOTE_N(3, 0), NULL, &ERR), ERROR_INVALID_RANGE);

// Test 2-note quartal chord on C4: C4-F4
ASSERT_NCHD(mah_get_quartal_chord(NOTE(C, 0, MAH_OCTAVE_4), 2, NOTE_N(5, 0), NOTE_N(5, 0), &ERR), NCHD(
    2, 0, STANDARD,
    NOTE_L(NOTE(C, 0, MAH_OCTAVE_4), NOTE(F, 0, MAH_OCTAVE_4)),
    NOTE_L(NOTE(C, 0, MAH_OCTAVE_4), NOTE(F, 0, MAH_OCTAVE_4))
));

// Test 3-note quartal chord on C4: C4-F4-Bb4
ASSERT_NCHD(mah_get_quartal_chord(NOTE(C, 0, MAH_OCTAVE_4), 3, NOTE_N(5, 0), NOTE_N(5, 0), &ERR), NCHD(
    3, 0, STANDARD,
    NOTE_L(NOTE(C, 0, MAH_OCTAVE_4), NOTE(F, 0, MAH_OCTAVE_4), NOTE(B, -1, MAH_OCTAVE_4)),
    NOTE_L(NOTE(C, 0, MAH_OCTAVE_4), NOTE(F, 0, MAH_OCTAVE_4), NOTE(B, -1, MAH_OCTAVE_4))
));

// Test 4-note quartal chord on C4: C4-F4-Bb4-Eb5
ASSERT_NCHD(mah_get_quartal_chord(NOTE(C, 0, MAH_OCTAVE_4), 4, NOTE_N(5, 0), NOTE_N(5, 0), &ERR), NCHD(
    4, 0, STANDARD,
    NOTE_L(NOTE(C, 0, MAH_OCTAVE_4), NOTE(F, 0, MAH_OCTAVE_4), NOTE(B, -1, MAH_OCTAVE_4), NOTE(E, -1, MAH_OCTAVE_5)),
    NOTE_L(NOTE(C, 0, MAH_OCTAVE_4), NOTE(F, 0, MAH_OCTAVE_4), NOTE(B, -1, MAH_OCTAVE_4), NOTE(E, -1, MAH_OCTAVE_5))
));

// Test 5-note quartal chord on C4: C4-F4-Bb4-Eb5-Ab5
ASSERT_NCHD(mah_get_quartal_chord(NOTE(C, 0, MAH_OCTAVE_4), 5, NOTE_N(5, 0), NOTE_N(5, 0), &ERR), NCHD(
    5, 0, STANDARD,
    NOTE_L(NOTE(C, 0, MAH_OCTAVE_4), NOTE(F, 0, MAH_OCTAVE_4), NOTE(B, -1, MAH_OCTAVE_4), NOTE(E, -1, MAH_OCTAVE_5), NOTE(A, -1, MAH_OCTAVE_5)),
    NOTE_L(NOTE(C, 0, MAH_OCTAVE_4), NOTE(F, 0, MAH_OCTAVE_4), NOTE(B, -1, MAH_OCTAVE_4), NOTE(E, -1, MAH_OCTAVE_5), NOTE(A, -1, MAH_OCTAVE_5))
));

// Test quartal chord on F# with sharps
ASSERT_NCHD(mah_get_quartal_chord(NOTE(F, 1, MAH_OCTAVE_4), 3, NOTE_N(5, 0), NOTE_N(5, 0), &ERR), NCHD(
    3, 0, STANDARD,
    NOTE_L(NOTE(F, 1, MAH_OCTAVE_4), NOTE(B, 0, MAH_OCTAVE_4), NOTE(E, 0, MAH_OCTAVE_5)),
    NOTE_L(NOTE(F, 1, MAH_OCTAVE_4), NOTE(B, 0, MAH_OCTAVE_4), NOTE(E, 0, MAH_OCTAVE_5))
));

// Test quartal chord on extreme octave
ASSERT_NCHD(mah_get_quartal_chord(NOTE(G, 0, MAH_OCTAVE_9), 2, NOTE_N(5, 0), NOTE_N(5, 0), &ERR), NCHD(
    2, 0, STANDARD,
    NOTE_L(NOTE(G, 0, MAH_OCTAVE_9), NOTE(C, 0, MAH_OCTAVE_10)),
    NOTE_L(NOTE(G, 0, MAH_OCTAVE_9), NOTE(C, 0, MAH_OCTAVE_10))
));